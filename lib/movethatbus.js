"use strict";({settings:{busSrc:"src/img/bus.png",sounds:["src/sound/likeabus.mp3","src/sound/sound.mp3"],amountOfTimesToLetBusLoad:1},speed:100,state:"unmoved",sizeFactor:1,moveFactor:1,bus:new Image,_rando:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return Math.floor(Math.random()*(e-t+1)+t)},createCanvas:function(){var t=document.createElement("canvas");return t.width=1024,t.height=768,t.id="movethatbus",t.style.height="100vh",t.style.objectFit="cover",t.style.position="fixed",t.style.top="50%",t.style.left="50%",t.style.transform="translate(-50%, -50%)",t.style.overflow="hidden",t},draw:function(t){var e=t.getContext("2d"),s=new Date;this.sizeFactor="moving"===this.state?1.1*this.sizeFactor:this.sizeFactor,this.moveFactor="moving"===this.state?1.12*this.moveFactor:this.moveFactor,e.globalCompositeOperation="destination-over",e.clearRect(0,0,t.width,t.height),e.save(),e.translate(t.width/2,t.height/2),e.rotate(1e-5*this._rando(-2,2)*s.getMilliseconds()),e.translate(-t.width/2,-t.height/2),e.drawImage(this.bus,this._rando(0,2)-this.moveFactor,this._rando(0,2),t.width+this.sizeFactor,t.height+this.sizeFactor),e.restore()},init:function(){var t=this,e=Number(localStorage.getItem("howManyTimesDidYouMoveThatBus"))||0;if(e<this.settings.amountOfTimesToLetBusLoad){console.info("initThatBus");var s=0;this.bus.src=this.settings.busSrc;var o=this.createCanvas();document.body.appendChild(o),o.addEventListener("click",(function(){0===s&&(t.settings.sounds.forEach((function(t){return new Audio(t).play()})),s++,localStorage.setItem("howManyTimesDidYouMoveThatBus","".concat(++e||s)),t.state="moving",setTimeout((function(){o.remove(),clearInterval(t.drawInterval)}),7e3))}),!1),this.bus.onload=function(){t.drawInterval=setInterval((function(){return t.draw(o)}),t.speed)}}},destroyCanvas:function(){}}).init();
